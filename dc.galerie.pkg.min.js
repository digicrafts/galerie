/**
* @preserve
* Copyright (c) 2014 DIGICRAFTS. All Right Reserved.
* This software is the confidential and proprietary information of
* DIGICRAFTS. ("Confidential Information").  You shall not
* disclose such Confidential Information and shall use it only in
* accordance with the terms of the license agreement you entered into
* with DIGICRAFTS.
*
* http://www.digicrafts.com.hk
*/
var dc;!function(a){!function(b){var c=function(){function b(a,b,c){this.type=a,this.target=b,this.bubbles=c,this.stopsPropagation=!1,this.inPropagation=!1}return b.prototype.clone=function(){return new a.events.Event(this.type,this.target,this.bubbles)},b.COMPLETE="complete",b.OPEN="open",b.CLOSE="close",b.REMOVED="removed",b.ADDED="added",b.ENTER_FRAME="enterframe",b.EXIT_FRAME="exitframe",b.RESIZE="resize",b.READY="ready",b.ERROR="error",b.CHANGE="change",b.UPDATE="update",b.SELECT="select",b.TRIGGERED="triggered",b}();b.Event=c}(a.events||(a.events={}));a.events}(dc||(dc={}));var dc;!function(a){!function(b){var c=function(){function b(){}return b.prototype._propagateEvent=function(a){!a.stopsPropagation&&a.bubbles&&this.mParent&&(a.inPropagation||(a.target=this),a.inPropagation=!0,this.mParent.dispatchEvent(a))},b.prototype.addEventListener=function(a,b,c){if(void 0===c&&(c=null),void 0==this.mListeners&&(this.mListeners={}),void 0===this.mListeners[a]&&(this.mListeners[a]=[]),-1===this.getEventListenerIndex(a,b)){var e=new d;e.listener=b,e.type=a,e.scope=c,this.mListeners[a].push(e)}},b.prototype.removeEventListener=function(a,b){var c=this.getEventListenerIndex(a,b);-1!=c&&this.mListeners[a].splice(c,1)},b.prototype.dispatchEvent=function(a){if(void 0==this.mListeners)return void this._propagateEvent(a);var b=this.mListeners[a.type];if(void 0!==b){this.mFncLength=b.length,a.target=a.target?a.target:this;for(var c,d=this.mFncLength,e=0;d>e;e++)c=b[e],c.listener.call(c.scope,a)}this._propagateEvent(a)},b.prototype.dispatchEventWith=function(b,c,d){void 0===c&&(c=!1),void 0===d&&(d=null),void 0==this.mReuseEvent&&(this.mReuseEvent=new a.events.Event(b)),this.mReuseEvent.bubbles=c,this.mReuseEvent.type=b,this.mReuseEvent.data=d,this.mReuseEvent.target=null,this.mReuseEvent.inPropagation=!1,this.dispatchEvent(this.mReuseEvent)},b.prototype.getEventListenerIndex=function(a,b){if(this.mListeners&&void 0!==this.mListeners[a])for(var c,d=this.mListeners[a],e=d.length,f=0;e>f;f++)if(c=d[f],b==c.listener)return f;return-1},b.prototype.hasEventListener=function(a,b){if(null!=this.mListeners)return-1!==this.getEventListenerIndex(a,b);if(this.mListeners&&void 0!==this.mListeners[a]){var c=this.mListeners[a];return c.length>0}return!1},b}();b.EventDispatcher=c;var d=function(){function a(){}return a}();b.EventData=d}(a.events||(a.events={}));a.events}(dc||(dc={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},dc;!function(a){!function(b){var c=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.CHILD_OPEN="childOpen",b.CHILD_PROGRESS="childProgress",b.CHILD_CANCEL="childCancel",b.CHILD_COMPLETE="childComplete",b.CHILD_FAIL="childFail",b.PROGRESS="progress",b.CANCEL="cancel",b.FAIL="fail",b.INIT="init",b.HTTP_STATUS="httpStatus",b.HTTP_RESPONSE_STATUS="httpResponseStatus",b.SCRIPT_ACCESS_DENIED="scriptAccessDenied",b.IO_ERROR="ioError",b.SECURITY_ERROR="securityError",b.UNCAUGHT_ERROR="uncaughtError",b}(a.events.Event);b.LoaderEvent=c}(a.events||(a.events={}));a.events}(dc||(dc={}));var dc;!function(a){!function(a){var b=function(){function a(a,b){this.index=a,this.data=b}return a}();a.CollectionItem=b;var c=function(){function a(a){void 0===a&&(a=null),this.mData=[],a&&(this.rawData=a,this._add(a))}return a.prototype._add=function(a){if(a.push)for(var c=0,d=a.length;d>c;c++){var e=new b;e.index=c,e.data=a[c],this.mData.push(e)}},a.prototype._updateDataIndex=function(){if(this.mData)for(var a=0,b=this.mData.length;b>a;a++)this.mData[a].index=a},Object.defineProperty(a.prototype,"length",{get:function(){return this.mData?this.mData.length:0},enumerable:!0,configurable:!0}),a.prototype.getItemAt=function(a){return this.mData?this.mData[a]:null},a.prototype.addItem=function(a){if(this.mData){var c=new b(this.mData.length,a);this.mData.push(c)}},a.prototype.addItemAt=function(a,c){if(this.mData){var d=new b;d.data=a,c>=this.mData.length?(d.index=this.mData.length,this.mData.push(d)):(this.mData.splice(c,0,d),this._updateDataIndex())}},a.prototype.append=function(){},a.prototype.removeItem=function(a){for(var b=this.mData.length,c=0;b>c;c++)if(this.mData[c]==a)return this.removeItemAt(c);return null},a.prototype.removeItemAt=function(a){var b;return this.mData&&a>=0&&(b=a>=this.mData.length?this.mData.pop():this.mData.splice(a,1)[0],this._updateDataIndex()),b},a.prototype.forEach=function(a){if(this.mData)for(var b=0,c=this.mData.length;c>b;b++)a(b,this.mData[b],c)},a}();a.Collection=c}(a.data||(a.data={}));a.data}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.events;!function(a){a[a.READY=0]="READY",a[a.LOADING=1]="LOADING",a[a.COMPLETED=2]="COMPLETED",a[a.PAUSED=3]="PAUSED",a[a.FAILED=4]="FAILED",a[a.DISPOSED=5]="DISPOSED"}(b.LoaderStatus||(b.LoaderStatus={}));var d=(b.LoaderStatus,function(a){function b(b,c){void 0===b&&(b=""),void 0===c&&(c=!0),a.call(this),this.url=b,this.autoDispose=c,this.status=0}return __extends(b,a),Object.defineProperty(b.prototype,"content",{get:function(){return this.mContent},enumerable:!0,configurable:!0}),b.prototype.load=function(a){void 0===a&&(a=!0),arguments.length>0&&(this.autoDispose=a),this.status=1,this.url?this._load():this._handleError("URL not valid. url="+this.url)},b.prototype.dispose=function(){},b.prototype._load=function(){},b.prototype._handleLoaderComplete=function(a,b){this.status=2,this.mContent=a,this.type=b,this.dispatchEvent(new c.LoaderEvent(c.Event.COMPLETE,this)),this.autoDispose&&this.dispose()},b.prototype._handleError=function(a,b){void 0===b&&(b=0),this.status=4,this.dispatchEvent(new c.LoaderEvent(c.Event.ERROR,this))},b}(c.EventDispatcher));b.Loader=d}(a.io||(a.io={}));a.io}(dc||(dc={}));var dc;!function(a){!function(b){var c=function(b){function c(a,c){void 0===a&&(a=""),void 0===c&&(c=!0),b.call(this,a,c)}return __extends(c,b),c.prototype._load=function(){var b=this,c=this.url.split(".").pop(),d=new XMLHttpRequest;d.open("GET",this.url,!0),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var e=d.getResponseHeader("content-type");if("application/xml"!=e&&"xml"!=c||!d.responseXML)"application/json"!=c&&"json"!=c||!d.responseText?b._handleLoaderComplete(d.response,"string"):b._handleLoaderComplete(JSON.parse(d.responseText),"json");else{var f;d.responseXML?f=d.responseXML:a.browser.ie?(f=new ActiveXObject("Microsoft.XMLDOM"),f.async=!1,f.loadXML(d.response)):f=d.responseXML,b._handleLoaderComplete(f,"xml")}}else if(0==d.readyState||200!=d.status)throw Error("Can't load the file ["+b.url+"]. ReadyState:"+d.readyState+" Status: "+d.status)},d.send()},c}(a.io.Loader);b.DataLoader=c}(a.io||(a.io={}));a.io}(dc||(dc={}));var dc;!function(a){!function(b){var c=function(a){function b(b,c){void 0===b&&(b=""),void 0===c&&(c=!0),a.call(this,b,c)}return __extends(b,a),b.prototype._load=function(){a.prototype._load.call(this);var b=this,c=new Image;c.onload=function(){c.onerror=c.onabort=this.onload=null,b._handleLoaderComplete(this,"image")},c.onabort=function(){},c.onerror=function(){c.onerror=c.onabort=this.onload=null,b._handleError("Error loading image. src="+b.url)},c.src=this.url},b}(a.io.Loader);b.ImageLoader=c}(a.io||(a.io={}));a.io}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.events,d=(a.io,function(a){function b(){a.call(this),this.mLoaderArray=[],this.mTotalLoader=0,this.mTotalLoaderRemain=0,this.mProgressEvent=new c.LoaderEvent(c.LoaderEvent.PROGRESS,this)}return __extends(b,a),Object.defineProperty(b.prototype,"progress",{get:function(){return 0==this.mTotalLoader?0:(this.mTotalLoader-this.mTotalLoaderRemain)/this.mTotalLoader},enumerable:!0,configurable:!0}),b.prototype.add=function(a){a&&(this.mTotalLoader++,this.mTotalLoaderRemain++,this.mLoaderArray.push(a))},b.prototype.remove=function(){},b.prototype.load=function(){for(var a=0;a<this.mLoaderArray.length;a++){var b=this.mLoaderArray[a];b.addEventListener(c.LoaderEvent.COMPLETE,this._handleLoaderComplete,this),b.load()}},b.prototype._handleLoaderComplete=function(a){var b=a.target;b.removeEventListener(c.LoaderEvent.COMPLETE,this._handleLoaderComplete),this.mTotalLoaderRemain--,this.dispatchEvent(this.mProgressEvent)},b}(c.EventDispatcher));b.LoaderQueue=d}(a.io||(a.io={}));a.io}(dc||(dc={}));var dc;!function(a){!function(b){function c(a,b){void 0===b&&(b="");for(var c=0;c<a.length;c++){var d=a[c];d.src=0==d.src.indexOf("http")?d.src:b+d.src,d.thumbnail=0==d.thumbnail.indexOf("http")?d.thumbnail:b+d.thumbnail}return a}function d(a){var b;if(a&&a.length>0){b=[];for(var c=0,d=0;d<a.length;d++){var e=a[d];if(1==e.nodeType&&"data"==e.className){for(var f={},g=0;g<e.attributes.length;g++){var h=e.attributes[g],i=""+h.name;0==i.indexOf("data-")&&(f[i.match(/^data-(.*)$/)[1]]=h.value)}f.index=c,c++,e.style.display="none",b.push(f)}}}return(b&&b.length)>0?b:null}var e=function(){function a(){}return a}(),f=function(){function a(a){void 0===a&&(a=""),this.rootPath="",this.rootPath=a}return a.prototype.parse=function(){},a}();b.XMLParser=f;var g=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.isXMLValid=function(b){return a.tag("items",b).length>0},c.prototype.parse=function(b){var c=a.tag("items",b);if(c.length>0){for(var d=[],f=this.rootPath,g=a.tag("item",b),h=0;h<g.length;h++){var i=g[h],j=new e,k=""+i.getAttribute("source"),l=""+i.getAttribute("thumbnail");j.index=h,j.src=0==k.indexOf("http")?k:f+k,j.thumbnail=0==l.indexOf("http")?l:f+l,j.category=""+i.getAttribute("category");for(var m=i.childNodes,n=0;n<m.length;n++){var o=m[n];3!=o.nodeType&&(j[o.nodeName]=""+o.textContent)}d.push(j)}return d}return null},c}(f);b.DCXMLParser=g;var h=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.isXMLValid=function(b){return a.tag("mediaGroup",b).length>0},c.prototype.parse=function(b){if(a.tag("mediaGroup",b).length>0){for(var c=[],d=a.tag("item",b),f=0;f<d.length;f++){var g=d[f],h=new e;h.index=f,a.browser.ie||(a.tag("description",g)&&(h.description=a.tag("description",g)[0].textContent),a.tag("title",g)&&(h.title=a.tag("title",g)[0].textContent),a.tag("category",g)&&(h.category=a.tag("category",g)[0].textContent));for(var i=a.tag("rendition",g),j=0;j<i.length;j++){var k=i[j],l=""+k.getAttribute("size"),m=""+k.getAttribute("src"),n=+k.getAttribute("width"),o=+k.getAttribute("height");switch(l){case"large":h.largeSource=this.rootPath+m,h.largeWidth=n,h.largeHeight=o;break;default:h.thumbSource=this.rootPath+m,h.thumbWidth=n,h.thumbHeight=o}h.thumbnail=h.thumbSource,h.src=h.largeSource,h.width=n,h.height=o}c.push(h)}return c}return null},c}(f);b.LRXMLParser=h;var i=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.isXMLValid=function(b){return a.tag("gallery",b).length>0},c.prototype.parse=function(b){if(a.tag("gallery",b).length>0){for(var c=[],d=this.rootPath+(""+a.tag("thumbnail",b)[0].getAttribute("base")),f=this.rootPath+(""+a.tag("large",b)[0].getAttribute("base")),g=a.tag("image",b),h=0;h<g.length;h++){var i=g[h],j=new e,k=""+i.getAttribute("path"),l=""+i.getAttribute("thumbnpath");j.index=h,j.src=0==k.indexOf("http")?k:f+k,j.thumbnail=0==l.indexOf("http")?l:d+l,j.width=+i.getAttribute("width"),j.height=+i.getAttribute("height"),c.push(j)}return c}return null},c}(f);b.PSXMLParser=i,b.parseJSONData=c,b.parseDomData=d}(a.parsers||(a.parsers={}));a.parsers}(dc||(dc={}));var dc;!function(a){!function(b){var c=function(){function a(){}return a}();b.OS=c;var d=function(){function a(){}return a}();b.Browser=d;var e=function(){function a(){}return a.init=function(b){var e=a.os=new c,f=a.browser=new d,g=b.match(/Web[kK]it[\/]{0,1}([\d.]+)/),h=b.match(/(Android);?[\s\/]+([\d.]+)?/),i=b.match(/(iPad).*OS\s([\d_]+)/),j=b.match(/(iPod)(.*OS\s([\d_]+))?/),k=!i&&b.match(/(iPhone\sOS)\s([\d_]+)/),l=b.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),m=l&&b.match(/TouchPad/),n=b.match(/Kindle\/([\d.]+)/),o=b.match(/Silk\/([\d._]+)/),p=b.match(/(BlackBerry).*Version\/([\d.]+)/),q=b.match(/(BB10).*Version\/([\d.]+)/),r=b.match(/(RIM\sTablet\sOS)\s([\d.]+)/),s=b.match(/PlayBook/),t=b.match(/Chrome\/([\d.]+)/)||b.match(/CriOS\/([\d.]+)/),u=b.match(/Firefox\/([\d.]+)/),v=b.match(/MSIE ([\d.]+)/),w=g&&b.match(/Mobile\//)&&!t,x=b.match(/Opera\/([\d._]+)/),y=b.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!t,v=b.match(/MSIE\s([\d.]+)/);(f.webkit=!!g)&&(f.version=g[1]),h&&(e.android=!0,e.version=h[2]),k&&!j&&(e.ios=e.iphone=!0,e.version=k[2].replace(/_/g,".")),i&&(e.ios=e.ipad=!0,e.version=i[2].replace(/_/g,".")),j&&(e.ios=e.ipod=!0,e.version=j[3]?j[3].replace(/_/g,"."):null),l&&(e.webos=!0,e.version=l[2]),m&&(e.touchpad=!0),p&&(e.blackberry=!0,e.version=p[2]),q&&(e.bb10=!0,e.version=q[2]),r&&(e.rimtabletos=!0,e.version=r[2]),s&&(f.playbook=!0),n&&(e.kindle=!0,e.version=n[1]),o&&(f.silk=!0,f.version=o[1]),!o&&e.android&&b.match(/Kindle Fire/)&&(f.silk=!0),t&&(f.chrome=!0,f.version=t[1]),u&&(f.firefox=!0,f.version=u[1]),v&&(f.ie=!0,f.version=v[1]),w&&(b.match(/Safari/)||e.ios)&&(f.safari=!0),x&&(f.opera=!0),y&&(f.webview=!0),v&&(f.ie=!0,f.version=v[1]),e.tablet=!!(i||s||h&&!b.match(/Mobile/)||u&&b.match(/Tablet/)||v&&!b.match(/Phone/)&&b.match(/Touch/)),e.phone=!(e.tablet||e.ipod||!(h||k||l||p||q||t&&b.match(/Android/)||t&&b.match(/CriOS\/([\d.]+)/)||u&&b.match(/Mobile/)||v&&b.match(/Touch/))),e.mobile=e.phone||e.tablet||f.silk},a}();b.Detect=e,e.init(navigator.userAgent),a.browser=e.browser,a.os=e.os}(a.utils||(a.utils={}));a.utils}(dc||(dc={}));var dc;!function(a){function b(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];a.logging&&window.console&&console.log.apply(console,arguments)}function c(a,b){return void 0===b&&(b=document),b.getElementById(a)}function d(a,b){return void 0===b&&(b=document),b.getElementsByClassName(a)}function e(a,b){return void 0===b&&(b=document),b.getElementsByTagName(a)}function f(a,b){""==a.className?a.className=b:-1==a.className.indexOf(b)&&(a.className=""+a.className+" "+b)}function g(a,b){a.className=a.className.replace(" "+b,"").replace(b+" ","").replace(b,"")}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function i(a,b,c){a.removeEventListener?a.removeEventListener(b,c):a.detachEvent("on"+b,c)}function j(){k(0)}function k(a){for(a=0;4>a;a++)try{return a?new ActiveXObject([,"Msxml2","Msxml3","Microsoft"][a]+".XMLHTTP"):new XMLHttpRequest}catch(b){}return null}function l(b,c,d){void 0===c&&(c=document),void 0===d&&(d=0),a._initQueue.push({f:b,scope:c,priority:d})}function m(){if(!a.ready){a.ready=!0,a.t("Digicrafts JS framework initialing...");for(var b in a)for(var c in a[b])a[b][c]&&a[b][c].hasOwnProperty("setup")&&a[b][c].setup.call(window);for(var d=0,e=a._initQueue.length;e>d;d++)a._initQueue[d].f.apply(a._initQueue[d].scope);a.t("...Digicrafts JS Ready!")}}a.version="1.0.0",a.browser,a.os,a.ready=!1,a.noevent=function(a){var b=a||window.event;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,!1},a.logging=!1,a.t=b,a.id=c,a.name=d,a.tag=e,a.addClass=f,a.removeClass=g,a.bind=h,a.unbind=i,a.ajax=j,a._initQueue=[],a.asyncInit=l,a.init=m,h(window,"load",m)}(dc||(dc={}));var dc;!function(a){!function(b){var c=function(){function b(){}return b.setup=function(){b.mDiv=document.createElement("div");var c={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};b.transition=b._getVendorPropertyName("transition"),b.transitionDelay=b._getVendorPropertyName("transitionDelay"),b.transform=b._getVendorPropertyName("transform"),b.transformOrigin=b._getVendorPropertyName("transformOrigin"),b.transform3d=b._checkTransform3dSupport(),b.transitionEnd=a.browser.webkit?"webkitTransitionEnd":a.browser.firefox?"transitionend":a.browser.opera?"oTransitionEnd":c[b.transition]||null,b.mDiv=null},b._getVendorPropertyName=function(a){if(a in b.mDiv.style)return a;var c=["moz","webkit","o","ms"],d=a.charAt(0).toUpperCase()+a.substr(1);if(a in b.mDiv.style)return a;for(var e=0;e<c.length;++e){var f=c[e]+d;if(f in b.mDiv.style)return f}return null},b._checkTransform3dSupport=function(){return b.mDiv.style[b.transform]="",b.mDiv.style[b.transform]="rotateY(90deg)",""!==b.mDiv.style[b.transform]},b}();b.TransformHelper=c;var d=function(){function a(){this.mX=0,this.mY=0,this.mTX=0,this.mTY=0,this.mPivotX=0,this.mPivotY=0,this.mScale=1,this.mSkewX=0,this.mSkewY=0,this.mRotation=0,this.mNeedValidate=!0,this.useTransform=!1,this.mProperties={}}return Object.defineProperty(a.prototype,"x",{get:function(){return this.mX},set:function(a){this.mX=a,this.mTX=this.mX-this.mPivotX,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.mY},set:function(a){this.mY=a,this.mTY=this.mY-this.mPivotY,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pivotX",{get:function(){return this.mPivotX},set:function(a){this.mPivotX=a,this.mTX=this.mX-this.mPivotX,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pivotY",{get:function(){return this.mPivotY},set:function(a){this.mPivotY=a,this.mTY=this.mY-this.mPivotY,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"rotation",{get:function(){return this.mRotation},set:function(a){this.mRotation=a,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this.mScale},set:function(a){this.mScale=a,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skewX",{get:function(){return this.mSkewX},set:function(a){this.mSkewX=a,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"skewY",{get:function(){return this.mSkewY},set:function(a){this.mSkewY=a,this.mNeedValidate=!0},enumerable:!0,configurable:!0}),a.prototype.copy=function(a){a&&(this.mX=a.x,this.mY=a.y,this.mScale=a.scale,this.mSkewX=a.skewX,this.mSkewY=a.skewY,this.mRotation=a.rotation,this.pivotX=a.pivotX,this.pivotY=a.pivotY)},a.prototype.apply=function(a){a.offsetHeight,this._updateTransform();for(var b in this.mProperties)a.style[b]=this.mProperties[b]},a.prototype.remove=function(){this.mProperties[c.transform]=""},a.prototype._updateTransform=function(a){if(void 0===a&&(a=null),this.useTransform){this.mProperties[c.transformOrigin]=this.pivotX+"px "+this.pivotY+"px";var b;b=c.transform3d?"translate3d("+this.mTX+"px,"+this.mTY+"px,0) scale3d("+this.mScale+","+this.mScale+",1) rotateZ("+this.rotation+"deg)":"translate("+this.mTX+"px,"+this.mTY+"px) scale("+this.mScale+") rotate("+this.rotation+"deg)",this.mSkewX|this.mSkewY&&(b=b+"skew("+this.mSkewX+"deg,"+this.mSkewY+"deg)"),this.mProperties[c.transform]=b}else this.mProperties[c.transformOrigin]&&(this.mProperties={}),this.mProperties.left=this.mTX+"px",this.mProperties.top=this.mTY+"px"},a}();b.Transform=d}(a.core||(a.core={}));a.core}(dc||(dc={}));var dc;!function(a){!function(b){var c=(a.display,function(){function b(a,b,c,d){this.target=a,this.duration=b,this.data=c,this.listener=d}return b.prototype.destory=function(){this.target=null,this.data=null,this.listener=null},b.to=function(c,e,f,g){if(void 0===g&&(g="all"),c){var h=f.delay?f.delay:0,i=f.ease?f.ease:d.default,j=function(){c.node.removeEventListener(a.core.TransformHelper.transitionEnd,j),c.node.style[a.core.TransformHelper.transition]="",f.oncomplete&&f.oncomplete.call(f.scope,k),k.destory(),k=null,b.instances[c.id]=null,delete b.instances[c.id]},k=new b(c,e,f,j);b.instances[c.id]=k,c.node.offsetHeight,c.node.style[a.core.TransformHelper.transition]=g+" "+e+"ms "+i+" "+h+"ms";for(var l in f)void 0!=c[l]&&(c[l]=f[l]);return c.node.addEventListener(a.core.TransformHelper.transitionEnd,j,!1),c.validate(),k}return null},b.fromTo=function(a,c,d,e,f){if(void 0===f&&(f="all"),a){for(var g in d)void 0!=a[g]&&(a[g]=d[g]);return a.validate(),b.to(a,c,e,f)}return null},b.kill=function(a){if(a){var c=b.instances[a.id];c&&c.listener(null)}},b.instances={},b}());b.Transition=c;var d=function(){function a(){}return a.default="ease",a.in="ease-in",a.out="ease-out",a.inout="ease-in-out",a.snap="cubic-bezier(0,1,.5,1)",a.easeOutCubic="cubic-bezier(.215,.61,.355,1)",a.easeInOutCubic="cubic-bezier(.645,.045,.355,1)",a.easeInCirc="cubic-bezier(.6,.04,.98,.335)",a.easeOutCirc="cubic-bezier(.075,.82,.165,1)",a.easeInOutCirc="cubic-bezier(.785,.135,.15,.86)",a.easeInExpo="cubic-bezier(.95,.05,.795,.035)",a.easeOutExpo="cubic-bezier(.19,1,.22,1)",a.easeInOutExpo="cubic-bezier(1,0,0,1)",a.easeInQuad="cubic-bezier(.55,.085,.68,.53)",a.easeOutQuad="cubic-bezier(.25,.46,.45,.94)",a.easeInOutQuad="cubic-bezier(.455,.03,.515,.955)",a.easeInQuart="cubic-bezier(.895,.03,.685,.22)",a.easeOutQuart="cubic-bezier(.165,.84,.44,1)",a.easeInOutQuart="cubic-bezier(.77,0,.175,1)",a.easeInQuint="cubic-bezier(.755,.05,.855,.06)",a.easeOutQuint="cubic-bezier(.23,1,.32,1)",a.easeInOutQuint="cubic-bezier(.86,0,.07,1)",a.easeInSine="cubic-bezier(.47,0,.745,.715)",a.easeOutSine="cubic-bezier(.39,.575,.565,1)",a.easeInOutSine="cubic-bezier(.445,.05,.55,.95)",a.easeInBack="cubic-bezier(.6,-.28,.735,.045)",a.easeOutBack="cubic-bezier(.175, .885,.32,1.275)",a.easeInOutBack="cubic-bezier(.68,-.55,.265,1.55)",a}();b.Ease=d}(a.core||(a.core={}));a.core}(dc||(dc={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},dc;!function(a){!function(b){var c=(a.display,function(){function a(){this.width=0,this.height=0,this.x=0,this.y=0,this.visible=!0,this.dirty=!0,this.row=0,this.extraWidth=0}return a}());b.LayoutItem=c;var d=function(){function b(b,c){this.horizontal=!1,this.width=b,this.height=c,this.gap=0,this.mChildren=new a.data.Collection,this.mChildrenIndex={}}return b.prototype.addItem=function(a,b){void 0===b&&(b=null);var d=new c;if(d.index=a,b)for(var e in b)d[e]=b[e];else if(this.mDefaultValues)for(var e in this.mDefaultValues)d[e]=this.mDefaultValues[e];return this.mChildrenIndex[d.index]=d,this.mChildren.addItem(d),d},b.prototype.removeItem=function(a){this.getItem(a)},b.prototype.getItem=function(a){return this.mChildrenIndex[a]},b.prototype.updateItem=function(a,b){var c=this.getItem(a);if(c){c.dirty=!0;for(var d in b)c[d]=b[d]}},b.prototype.resetLayout=function(){var a,b=this;this.mChildren.forEach(function(c,d){a=d.data,b.updateItem(a.index,{width:a.width,height:a.height})})},b.prototype.getLayoutLimit=function(){return 10},b.prototype.postLayout=function(){},b.prototype.getItemSize=function(){return{w:0,h:0}},b.prototype.layout=function(){},b.prototype.setAllVisible=function(a){this.mChildren.forEach(function(b,c){var d=c.data;d.dirty=!0,d.visible=a})},b.prototype.updateAllItems=function(a,b){this.mChildren.forEach(function(c,d){d.data[a]=b})},b}();b.Layout=d;var e=function(a){function b(){a.apply(this,arguments),this.mColumnCount=-1,this.mRealColumnCount=5,this.mColumnSize=100,this.mRowCount=5,this.mRowSize=100,this.mOffset=0,this.buffer=10,this.fitWidth=!1}return __extends(b,a),Object.defineProperty(b.prototype,"columnCount",{get:function(){return this.mColumnCount},set:function(a){this.mColumnCount=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"columnSize",{get:function(){return this.mColumnSize},set:function(a){this.mColumnSize=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rowCount",{get:function(){return this.mRowCount},set:function(a){this.mRowCount=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"rowSize",{get:function(){return this.mRowSize},set:function(a){this.mRowSize=a},enumerable:!0,configurable:!0}),b.prototype.getLayoutLimit=function(){if(0==this.mChildren.length)return Math.ceil(this.height/this.mColumnSize)*this.mRealColumnCount+this.buffer;this.mChildren.getItemAt(this.mChildren.length-1).data;return Math.ceil(this.height/this.mColumnSize)*this.mRealColumnCount+this.buffer},b.prototype.resetLayout=function(){this.horizontal||(this.mColumnCount>0?(this.mRealColumnCount=this.mColumnCount,this.mColumnSize=(this.width-this.gap*(this.mRealColumnCount-1))/this.mRealColumnCount):this.mRealColumnCount=Math.floor((this.width+this.gap)/(this.mColumnSize+this.gap)),this.mOffset=(this.width-(this.mColumnSize+this.gap)*this.mRealColumnCount+this.gap)/2,this.mDefaultValues={x:0,y:0,width:this.mColumnSize,height:this.mColumnSize})},b.prototype.layout=function(){this.horizontal?this.fitWidth?this._layoutFitHorizontal():this._layoutHorizontal():this._layoutVertical()},b.prototype.getItemSize=function(a,b){var c=a/b;return this.horizontal?{w:this.mColumnSize*c,h:this.mColumnSize}:{w:this.mColumnSize,h:this.mColumnSize/c}},b.prototype._layoutVertical=function(){for(var a=this,b=0,c=0,d=[],e=0;e<this.mRealColumnCount;e++)d[e]=0;this.mChildren.forEach(function(e,f){var g=f.data;if(g.visible){var h=g.x,i=g.y;c=0;for(var j=0;j<a.mRealColumnCount;j++)d[j]<b&&(c=j,b=d[j]);b=d[c],g.x=c*(a.mColumnSize+a.gap)+a.mOffset,g.y=b,g.dirty=h!=g.x||i!=g.y,b=d[c]=b+g.height+a.gap}}),this.height=b},b.prototype._layoutHorizontal=function(){var a=this,b=0,c=-1,d=[0];this.mChildren.forEach(function(e,f){var g=f.data;b=-1,c=a.width;for(var h=0,i=d.length;i>h;h++)d[h]+g.width+a.gap<=a.width&&d[h]<c&&(c=d[h],b=h);-1==b&&(c=0,b=d.length,d.push(0)),g.x=c,g.y=b*(a.mColumnSize+a.gap),g.dirty=!0,g.extraWidth=0,d[b]=g.x+g.width+a.gap}),this.height=d.length*(a.mColumnSize+a.gap)-a.gap,d=null},b.prototype._layoutFitHorizontal=function(){var a=this,b=0,c=-1,d=[0],e=[0],f=[0];this.mChildren.forEach(function(g,h){var i=h.data;b=-1,c=a.width;for(var j=0,k=d.length;k>j;j++)d[j]+i.width+a.gap<=a.width&&d[j]<c&&(c=d[j],b=j);-1==b&&(c=0,b=d.length,d.push(0),e.push(0),f.push(0)),i.x=c,i.y=b*(a.mColumnSize+a.gap),i.dirty=!0,i.row=b,f[b]+=i.extraWidth,d[b]=i.x+i.width+a.gap,e[b]+=1});for(var g=[],h=0;h<e.length;h++)g[h]=isFinite(d[h])?(this.width-d[h]+this.gap)/e[h]:0;for(var i=[],h=0;h<e.length;h++)i[h]=0;this.mChildren.forEach(function(a,b){var c=b.data,d=c.row,e=isFinite(g[d])?g[d]:0;0==c.x||(c.x=c.x+g[d]*i[d]),i[d]++,c.extraWidth=e}),this.height=d.length*(a.mColumnSize+this.gap)-a.gap,d=null},b}(d);b.ColumnLayout=e}(a.layout||(a.layout={}));a.layout}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.events,d=a.core,e=function(){function a(){this.width=0,this.height=0,this.innerWidth=0,this.innerHeight=0,this.outerWidth=0,this.outerHeight=0}return a}();b.Size=e;var f=function(){function a(){this.paddingTop=0,this.paddingBottom=0,this.paddingLeft=0,this.paddingRight=0,this.marginTop=0,this.marginBottom=0,this.marginLeft=0,this.marginRight=0,this.borderLeftWidth=0,this.borderRightWidth=0,this.borderTopWidth=0,this.borderBottomWidth=0,this.border="",this.borderWidth=0,this.borderHeight=0,this.paddingWidth=0,this.paddingHeight=0,this.marginWidth=0,this.marginHeight=0,this.isBorderBox=!0,this.isBoxSizeOuter=!1,this.isBorderBoxSizeOuter=!1}return a}();b.Measurements=f;var g=function(){function a(){}return a.setup=function(){var b=window.getComputedStyle;a.getStyle=b?function(a){return b(a,null)}:function(a){return a.currentStyle}},a.getStyleSize=function(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b},a.getMeasurements=function(b,c,d){void 0===d&&(d=void 0),void 0==d&&(d=new f);for(var e=0,g=a.styles.length;g>e;e++){var h=a.styles[e],i=a.mungeNonPixel(b,c[h]),j=parseFloat(i);d[h]=isNaN(j)?0:j}return d.borderWidth=d.borderLeftWidth+d.borderRightWidth,d.borderHeight=d.borderTopWidth+d.borderBottomWidth,d.paddingWidth=d.paddingLeft+d.paddingRight,d.paddingHeight=d.paddingTop+d.paddingBottom,d.marginWidth=d.marginLeft+d.marginRight,d.marginHeight=d.marginTop+d.marginBottom,d.isBorderBoxSizeOuter=d.isBorderBox,d},a.mungeNonPixel=function(a,b){if(getComputedStyle||-1===b.indexOf("%"))return b;var c=a.style,d=c.left,e=a.runtimeStyle,f=e&&e.left;return f&&(e.left=a.currentStyle.left),c.left=b,b=""+c.pixelLeft,c.left=d,f&&(e.left=f),b},a.styles=["paddingTop","paddingBottom","paddingLeft","paddingRight","marginTop","marginBottom","marginLeft","marginRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a}();b.MeasurementsHelper=g;var h=function(b){function h(a,c){void 0===a&&(a=""),void 0===c&&(c=null),b.call(this),this.mAlpha=1,this.mVisible=!0,this.mNeedValidateSize=!0,this.name=a,this.node=c,this._init()}return __extends(h,b),h.postSetup=function(){h.DEFAULT_CSS.push(".dc-ui.clipping{overflow:hidden !important} .dc-ui.hide{ display:none !important} .dc-ui.root{}"),h.DEFAULT_CSS.push(".dc-ui.interactive{cursor: pointer; cursor: hand}"),h.DEFAULT_CSS.push(".dc-ui.floating{position: absolute}"),h.DEFAULT_CSS.push(".dc-ui.fill{left:0;right:0;top:0;bottom:0}"),h.DEFAULT_CSS.push(".noscroll{overflow:hidden!important}"),h.DEFAULT_CSS.push(a.browser.firefox?".dc-ui {-moz-box-sizing:border-box}":".dc-ui {box-sizing:border-box}");var b=document.createElement("style");b.id="dc_styles",b.type="text/css",b.innerHTML=h.DEFAULT_CSS.join(" "),document.getElementsByTagName("head")[0].appendChild(b)},Object.defineProperty(h.prototype,"parent",{get:function(){return this.mParent},set:function(a){this.mParent=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"x",{get:function(){return this.mTransform.x},set:function(a){this.node.setAttribute("data-x",""+a),this.mTransform?this.mTransform.x=a:this.node.style.left=a+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"y",{get:function(){return this.mTransform.y},set:function(a){this.node.setAttribute("data-y",""+a),this.mTransform?this.mTransform.y=a:this.node.style.top=a+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"pivotX",{get:function(){return this.mTransform.pivotX},set:function(a){this.mTransform.pivotX=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"pivotY",{get:function(){return this.mTransform.pivotY},set:function(a){this.mTransform.pivotY=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"rotation",{get:function(){return this.mTransform.rotation},set:function(a){this.mTransform.rotation=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this.size.width},set:function(a){this.size.width!=a&&this.setSize(a,this.size.height)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"height",{get:function(){return this.size.height},set:function(a){this.size.height!=a&&this.setSize(this.size.width,a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"scale",{get:function(){return this.mTransform.scale},set:function(a){this.mTransform.scale=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"skewX",{get:function(){return this.mTransform.skewX},set:function(a){this.mTransform.skewX=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"skewY",{get:function(){return this.mTransform.skewY},set:function(a){this.mTransform.skewY=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"alpha",{get:function(){return this.mAlpha},set:function(a){this.mAlpha=a,this.node.style.opacity=1==a?"":this.mAlpha+""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"transform",{get:function(){return this.mTransform},set:function(a){this.mTransform=a},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"visible",{get:function(){return this.mVisible},set:function(a){this.mVisible!=a&&(this.mVisible=a,a?this.removeClass("hide"):this.addClass("hide"))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"floating",{get:function(){return this.mFloating},set:function(a){this.mFloating!=a&&(this.mFloating=a,a?this.addClass("floating"):this.removeClass("floating"))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"clipping",{get:function(){return this.mClipping
},set:function(a){this.mClipping!=a&&(this.mClipping=a,a?this.addClass("clipping"):this.removeClass("clipping"))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"interactive",{get:function(){return this.mInteractive},set:function(a){this.mInteractive!=a&&(this.mInteractive=a,a?(this.addClass("interactive"),this._addEvents()):(this.removeClass("interactive"),this._removeEvents()))},enumerable:!0,configurable:!0}),h.prototype._init=function(){this.id="ui_"+h.ID_COUNT,h.ID_COUNT++,this.measurements=new f,this.size=new e,this._createChildren(),this.addClass("dc-ui"),this.node.setAttribute("data-id",this.id)},h.prototype._createNode=function(){this.node=document.createElement("div")},h.prototype._createChildren=function(){this._createNode()},h.prototype._addEvents=function(){var b=this,c=a.os.mobile?"touchend":"click",d=!0;this.mTriggeredEvent=function(){d&&b._handleTriggeredEvent(),d=!0},a.bind(this.node,c,this.mTriggeredEvent),a.os.mobile&&(this.mMobileTriggeredEvent=function(){d=!1},a.bind(this.node,"touchmove",this.mMobileTriggeredEvent))},h.prototype._removeEvents=function(){var b=a.os.mobile?"touchend":"click";a.unbind(this.node,b,this.mTriggeredEvent),this.mTriggeredEvent=null,a.os.mobile&&this.mMobileTriggeredEvent&&(a.unbind(this.node,"touchmove",this.mMobileTriggeredEvent),this.mMobileTriggeredEvent=null)},h.prototype._handleTriggeredEvent=function(){this.dispatchEventWith(c.Event.TRIGGERED,!0)},h.prototype.attachTo=function(a,b){void 0===b&&(b=!0),a&&(a.appendChild(this.node),b&&this.addClass("root"),this.validate())},h.prototype.removeFromParent=function(){this.node.parentNode.removeChild(this.node)},h.prototype.addClass=function(b){a.addClass(this.node,b)},h.prototype.removeClass=function(b){a.removeClass(this.node,b)},h.prototype.setRoot=function(a){this.root=a},h.prototype.measure=function(){this.mStyle=g.getStyle(this.node),g.getMeasurements(this.node,this.mStyle,this.measurements)},h.prototype.setSize=function(a,b,c){void 0===c&&(c=!1),this.size.width=a,this.size.height=b,c?(this.node.style.width=this.size.width+"px",this.node.style.height=this.size.height+"px",this.measure(),this.size.innerHeight=this.size.height-this.measurements.paddingHeight-this.measurements.borderHeight,this.size.innerWidth=this.size.width-this.measurements.paddingWidth-this.measurements.borderWidth,this.size.outerHeight=this.size.height+this.measurements.marginHeight,this.size.outerWidth=this.size.width+this.measurements.marginWidth):this.mNeedValidateSize=!0},h.prototype.validateSize=function(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=!1),this.measure(),a)this.node.style.width=null,this.size.width=this.node.offsetWidth;else if(this.size.width<=0){var c=g.getStyleSize(this.mStyle.width);this.size.width=c!==!1?c+(this.measurements.isBorderBoxSizeOuter?0:this.measurements.paddingWidth+this.measurements.borderWidth):this.node.offsetWidth}else this.node.style.width=this.size.width+"px";if(b)this.node.style.height=null,this.size.height=this.node.offsetHeight;else if(this.size.height<=0){var d=g.getStyleSize(this.mStyle.height);this.size.height=d!==!1?d+(this.measurements.isBorderBoxSizeOuter?0:this.measurements.paddingHeight+this.measurements.borderHeight):this.node.offsetHeight}else this.node.style.height=this.size.height+"px";this.size.innerHeight=this.size.height-this.measurements.paddingHeight-this.measurements.borderHeight,this.size.innerWidth=this.size.width-this.measurements.paddingWidth-this.measurements.borderWidth,this.size.outerHeight=this.size.height+this.measurements.marginHeight,this.size.outerWidth=this.size.width+this.measurements.marginWidth},h.prototype.validatePosition=function(){this.mTransform&&this.mTransform.apply(this.node)},h.prototype.validate=function(a,b,c){void 0===a&&(a=!1),void 0===b&&(b=!1),void 0===c&&(c=!1),(this.mNeedValidateSize||a)&&(this.validateSize(b,c),this.mNeedValidateSize=!1),this.validatePosition()},h.prototype.fadeIn=function(a){void 0===a&&(a=1e3),this.alpha=0,this.visible=!0,1!=this.alpha&&d.Transition.to(this,a,{alpha:1},"opacity")},h.ID_COUNT=0,h.DEFAULT_CSS=[],h}(c.EventDispatcher);b.View=h;var i=function(a){function b(){a.apply(this,arguments),this.numChildren=0}return __extends(b,a),b.prototype._createChildren=function(){a.prototype._createChildren.call(this),this.mContainer=this.node,this.children=[],this.mChildrenIndex={}},b.prototype.setRoot=function(b){a.prototype.setRoot.call(this,b);for(var c=this.children.length,d=0;c>d;d++)this.children[d].setRoot(b)},b.prototype._updateIndex=function(){for(var a=this.children.length,b=0;a>b;b++)this.children[b].index=b;this.mLastChild=this.children[this.children.length-1],this.numChildren=this.children.length},b.prototype.addChild=function(a,b){void 0===b&&(b=!0),this.addChildAt(a,this.children.length,b)},b.prototype.addChildren=function(a,b){void 0===b&&(b=!0);for(var d=0,e=a.length;e>d;d++){var f=a[d];f&&f.node&&(this.mChildrenIndex[f.id]||(this.mChildrenIndex[f.id]=!0,f.setRoot(this.root),f.parent=this,this.children.push(f),this.mContainer.appendChild(f.node),b&&f.validate(),this.dispatchEventWith(c.Event.ADDED)))}this._updateIndex()},b.prototype.removeChild=function(a,b){void 0===b&&(b=!0);for(var c=this.children.length-1;c>=0;){if(this.children[c]==a){this.removeChildAt(c,b);break}c--}},b.prototype.addChildAt=function(a,b,d){void 0===d&&(d=!0),a&&a.node&&(this.mChildrenIndex[a.id]||(this.mChildrenIndex[a.id]=!0,a.setRoot(this.root),a.parent=this,b>=this.children.length?(this.children.push(a),this.mContainer.appendChild(a.node)):(this.children.splice(b,0,a),this.mContainer.childNodes[b].insertBefore(a.node)),this._updateIndex(),d&&a.validate(),this.dispatchEventWith(c.Event.ADDED)))},b.prototype.removeChildAt=function(a,b){if(void 0===b&&(b=!0),a>=0&&a<this.children.length){var d=this.children[a];if(this.mChildrenIndex[d.id])return d.setRoot(null),d.parent=null,a>=this.children.length?this.children.pop():this.children.splice(a,1),this.mContainer.removeChild(d.node),this._updateIndex(),delete this.mChildrenIndex[d.id],b&&d.validate(),this.dispatchEventWith(c.Event.REMOVED),d}return null},b.prototype.removeAllChildren=function(){for(var a=this.children.length-1;a>=0;a--)this.mContainer.removeChild(this.children[a].node);this.children=[],this.mChildrenIndex={}},b.prototype.getChildAt=function(a){return a>=0&&a<this.children.length?this.children[a]:null},b.prototype.lastChild=function(){return this.mLastChild},b.prototype.forEach=function(a){for(var b=0,c=this.numChildren;c>b;b++)a(b,this.children[b])},b.prototype.contains=function(a){return a?this.mChildrenIndex[a.id]||!1:!1},b.prototype.setChildIndex=function(a,b){if(this.contains(a)){var c=this.getChildAt(b);c&&(this.mContainer.insertBefore(a.node,c.node.nextSibling),this.children.splice(a.index,1),this.children.splice(b,0,a),this._updateIndex())}},b.prototype.bringToFront=function(a){this.children.splice(a.index,0),this.children.push(a),this.mContainer.appendChild(a.node),this._updateIndex()},b}(h);b.ViewContainer=i,a.asyncInit(h.postSetup)}(a.display||(a.display={}));a.display}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.display,d=function(a){function b(b){void 0===b&&(b=""),""!=b&&(this.mText=b,this.mNeedValidateSize=!0),a.call(this,null)}return __extends(b,a),Object.defineProperty(b.prototype,"text",{get:function(){return this.mText},set:function(a){this.mText!=a&&(this.mText=a,this.node.innerHTML=""+this.mText,this.validate(!0))},enumerable:!0,configurable:!0}),b.prototype._createChildren=function(){a.prototype._createChildren.call(this),this.addClass("dc-text")},b.prototype.validate=function(b,c,d){void 0===b&&(b=!1),void 0===c&&(c=!1),void 0===d&&(d=!1),""==this.node.innerHTML&&this.mText&&(this.node.innerHTML=""+this.mText),a.prototype.validate.call(this,b,!0,!0)},b}(c.View);b.TextField=d}(a.text||(a.text={}));a.text}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.text,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createChildren=function(){a.prototype._createChildren.call(this),this.addClass("dc-progress")},b.prototype.setProgress=function(){},b}(a.display.ViewContainer);b.Progress=d;var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createChildren=function(){a.prototype._createChildren.call(this),this.mText=new c.TextField,this.addChild(this.mText)},b.prototype.setProgress=function(a){this.mText.text=""+a},b}(d);b.TextProgress=e}(a.display||(a.display={}));a.display}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.events.Event,d=function(){function a(){}return a.TOP=1,a.RIGHT=2,a.BOTTOM=4,a.LEFT=8,a.VERTICAL_CENTER=0,a.HORIZONTAL_CENTER=0,a.AUTO=99,a}();b.Alignment=d;var e=function(){function a(){}return a.getSize=function(b,c,e,f,g,h){void 0===g&&(g="auto"),void 0===h&&(h=0);var i=e,j=f;g==a.STRETCH?(i=e,j=f):g==a.AUTO_WIDTH?(i=e,j=c*e/b):g==a.AUTO_HEIGHT?(j=f,i=b*f/c):g==a.AUTO?f>e?c>b?(j=f,i=b*f/c,i>e&&(i=e,j=c*e/b)):(i=e,j=c*e/b,j>f&&(j=f,i=b*f/c)):b>c?(i=e,j=c*e/b,j>f&&(j=f,i=b*f/c)):(j=f,i=b*f/c,i>e&&(i=e,j=c*e/b)):g==a.AUTO_FILL&&(f>e?(j=f,i=b*f/c,e>i&&(i=e,j=c*e/b)):(i=e,j=c*e/b,f>j&&(j=f,i=b*f/c)));var k=(e-i)/2,l=(f-j)/2;return h&d.LEFT&&(k=0),h&d.RIGHT&&(k=e-i),h&d.TOP&&(l=0),h&d.BOTTOM&&(l=f-j),{x:k,y:l,width:i,height:j}},a.AUTO="auto",a.AUTO_WIDTH="auto_width",a.AUTO_HEIGHT="auto_height",a.STRETCH="stretch",a.CLIP="clip",a.AUTO_FILL="auto_fill",a}();b.ScaleMode=e;var f=function(b){function d(a,c){void 0===a&&(a=null),void 0===c&&(c="auto"),this.mURL=a,this.mScaleMode=c,b.call(this,null)}return __extends(d,b),d.setup=function(){a.display.View.DEFAULT_CSS.push(".dc-image {display:block;-webkit-user-select: none;-webkit-touch-callout: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none}")},Object.defineProperty(d.prototype,"url",{get:function(){return this.mURL},set:function(a){this.url==a?(this.mImage.src="",this._load()):(this.mURL=a,this._load())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"scaleMode",{get:function(){return this.mScaleMode},set:function(a){this.scaleMode!=a&&(this.scaleMode=a,this._updateScale())},enumerable:!0,configurable:!0}),d.prototype._createChildren=function(){this.node=this.mImage=new Image,this.mImage.ondragstart=this.mImage.oncontextmenu=a.noevent,this.addClass("dc-image"),this._load()},d.prototype.validate=function(a,c,d){void 0===a&&(a=!1),void 0===c&&(c=!1),void 0===d&&(d=!1),this.mNeedValidateSize&&this._updateScale(),b.prototype.validate.call(this,a,c,d)},d.prototype._load=function(){var a=this;this.mURL&&(this.mNeedUpdateSize=!0,this.mImage.onload=function(){a.mImage.onload=null,a._updateScale(),a.dispatchEventWith(c.COMPLETE),a.dispatchEventWith(c.UPDATE)},this.mImage.src=this.mURL)},d.prototype._updateScale=function(){if(this.mImage.width|this.mImage.height)if(this.mNeedUpdateSize)if(a.browser.ie&&parseFloat(a.browser.version)<9){var b=new Image;b.src=this.mImage.src,this.orgWidth=b.width,this.orgHeight=b.height}else this.orgWidth=this.mImage.naturalWidth,this.orgHeight=this.mImage.naturalHeight;else this.mImage.style.width=this.size.innerWidth+"px",this.mImage.style.height=this.size.innerHeight+"px"},d}(a.display.View);b.ImageView=f}(a.display||(a.display={}));a.display}(dc||(dc={}));var dc;!function(a){!function(b){var c=(a.events.Event,a.text),d=function(b){function c(a){void 0===a&&(a="button"),b.call(this,a)}return __extends(c,b),c.setup=function(){a.display.View.DEFAULT_CSS.push(".dc-button{background-color:#EEE;color:#000;padding:5px 10px;display:inline;-webkit-user-select: none;-webkit-touch-callout: none;-khtml-user-select: none;-moz-user-select: none;-o-user-select: none;user-select: none}")},c.prototype._createChildren=function(){this.name="button",b.prototype._createChildren.call(this),this.addClass("dc-button"),this.interactive=!0},c.prototype._addEvents=function(){if(b.prototype._addEvents.call(this),a.os.phone||a.os.tablet);else{var c=this;a.bind(this.node,"mousedown",function(){c.addClass("down")}),a.bind(this.node,"mouseover",function(){c.addClass("over")}),a.bind(this.node,"mouseout",function(){c.removeClass("over")}),a.bind(window,"mouseup",function(){c.removeClass("down")})}},c.prototype._removeEvents=function(){b.prototype._removeEvents.call(this)},c}(c.TextField);b.Button=d}(a.display||(a.display={}));a.display}(dc||(dc={}));var dc;!function(a){!function(b){var c=function(b){function c(){b.apply(this,arguments),this.opened=!1}return __extends(c,b),c.setup=function(){a.display.View.DEFAULT_CSS.push(".dc-ui.dc-modal.fixed{z-index:90000;position:fixed;background-color:rgba(0, 0, 0, 0.7);bottom:0;left:0;right:0;top:0}.dc-ui.dc-modal.absolute{z-index:90000;position:absolute;background-color:rgba(0, 0, 0, 0.7);bottom:0;left:0;right:0;top:0}.dc-modal-container{}")},Object.defineProperty(c.prototype,"data",{get:function(){return this.mData},set:function(a){this.mData=a,this._validateData(a)},enumerable:!0,configurable:!0}),c.prototype._createNode=function(){c.backgroundNode?this.node=c.backgroundNode:(b.prototype._createNode.call(this),c.backgroundNode=this.node)},c.prototype._createChildren=function(){b.prototype._createChildren.call(this),void 0==this.modalContainer&&(this.modalContainer=new a.display.View,this.modalContainer.transform=new a.core.Transform),this.mContainer=this.modalContainer.node,this.modalContainer.addClass("dc-modal-container"),this.addClass("dc-modal root"),this.node.appendChild(this.modalContainer.node)},c.prototype._validateData=function(){},c.prototype._prepare=function(){void 0==c.backgroundNode.parentElement?this.attachTo(this.mTarget):c.backgroundNode.parentElement!=this.mTarget&&this.attachTo(this.mTarget),this.visible=!0,this.modalContainer.visible=!1},c.prototype._present=function(){this.modalContainer.visible=!0,this.modalContainer.setSize(this.modalWidth,this.modalHeight),this.modalContainer.validateSize(),this._open()},c.prototype._position=function(a,b){var c=(this.size.innerWidth-a)/2,d=(this.size.innerHeight-b)/2;this.modalContainer.x=c,this.modalContainer.y=d,this.modalContainer.validatePosition()},c.prototype._open=function(){this._position(this.modalContainer.width,this.modalContainer.height),this.opened=!0},c.prototype._close=function(){void 0!=c.backgroundNode.parentElement&&(this.modalContainer.visible=!1,this.visible=!1,this.opened=!1)},c.prototype.show=function(b){void 0===b&&(b=null),this.mTarget=b?b:document.body,a.addClass(this.mTarget,"noscroll"),this.mTarget==document.body?(this.node.style.top="",this.addClass("fixed")):this.addClass("absolute");var c=this;this.mResizeCallback=function(){c.validate(!0,!0,!0),c._position(c.modalContainer.width,c.modalContainer.height)},a.bind(window,"resize",this.mResizeCallback),this.mCloseCallback=function(a){a.target==c.node&&c.close()},a.os.mobile?a.bind(this.node,"touchend",this.mCloseCallback):a.bind(this.node,"click",this.mCloseCallback),this._prepare(),this.mTarget==document.body?c.validateSize(!0,!0):c.setSize(this.mTarget.clientWidth,this.mTarget.clientHeight,!0),this._present()},c.prototype.close=function(){a.unbind(window,"resize",this.mResizeCallback),a.removeClass(this.mTarget,"noscroll"),this.removeClass("absolute"),this.removeClass("fixed"),a.os.mobile?a.unbind(this.node,"touchend",this.mCloseCallback):a.unbind(this.node,"click",this.mCloseCallback),this._close()},c}(a.display.ViewContainer);b.Modal=c}(a.display||(a.display={}));a.display}(dc||(dc={}));var dc;!function(a){!function(b){var c=(a.data,a.core),d=(a.layout,function(a){function b(){a.apply(this,arguments),this.status=0,this.mSelected=!1}return __extends(b,a),Object.defineProperty(b.prototype,"data",{get:function(){return this.mData},set:function(a){this.mData=a,this._validateData(a.data)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"selected",{get:function(){return this.mSelected},set:function(a){this.mSelected!=a&&(this.mSelected=a,this._validateSelection(a))},enumerable:!0,configurable:!0}),b.prototype._validateData=function(){},b.prototype._validateSelection=function(){},b}(a.display.View));b.DefaultViewRenderer=d;var e=function(a){function b(){a.apply(this,arguments),this.status=0,this.mSelected=!1}return __extends(b,a),Object.defineProperty(b.prototype,"data",{get:function(){return this.mData},set:function(a){this.mData=a,this._validateData(a.data)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"selected",{get:function(){return this.mSelected},set:function(a){this.mSelected!=a&&(this.mSelected=a,this._validateSelection(a))},enumerable:!0,configurable:!0}),b.prototype._validateData=function(){},b.prototype._validateSelection=function(){},b}(a.display.ViewContainer);b.DefaultViewContainerRenderer=e;var f=function(a){function b(b){a.call(this,b),this.name=b}return __extends(b,a),Object.defineProperty(b.prototype,"data",{get:function(){return this.mData},set:function(a){this.mData!=a&&(this.mData=a,this._validateData(a))},enumerable:!0,configurable:!0}),b.prototype._validateData=function(a){a&&a.thumbnail&&(this.url=a.thumbnail)},b}(a.display.ImageView);b.DefaultImageRenderer=f;var g=function(b){function d(){b.apply(this,arguments),this.defaultSelectedItemIndex=-1,this.animationDuration=300,this.mLayoutLock=!1,this.mSelectable=!0,this.mWaitingUpdateItem=0}return __extends(d,b),Object.defineProperty(d.prototype,"dataProvider",{get:function(){return this.mDataProvider},set:function(a){this.mDataProvider!=a&&(this.mDataProvider=a,this._validateData())},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"waitingUpdateItem",{get:function(){return this.mWaitingUpdateItem},set:function(a){this.mWaitingUpdateItem=a},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"selectedItem",{get:function(){return this.mSelectedItem},set:function(a){this.selectedItem!=a&&this._updateSelection(a&&void 0!=a.index?a.index:-1)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"selectedIndex",{get:function(){return this.mSelectedIndex},set:function(a){this.mSelectedIndex!=a&&this._updateSelection(a)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"selectable",{get:function(){return this.mSelectable},set:function(a){this.mSelectable!=a&&(this.mSelectable=a,this._updateSelection())},enumerable:!0,configurable:!0}),d.prototype._createItemRenderer=function(){var b=new this.itemRenderer;return b.addEventListener(a.events.Event.TRIGGERED,this._handleItemTriggeredEvent,this),b.properties=this.defaultItemProperties,b},d.prototype._updateSelection=function(b){if(void 0===b&&(b=-1),this.mSelectable&&b>=0&&b<this.mDataProvider.length){var c=this;this.mSelectedIndex=b,this.mSelectedItem=this.mDataProvider.getItemAt(this.mSelectedIndex),this.forEach(function(b,d){d.data==c.mSelectedItem?(void 0==d.selected||0==d.selected)&&(d.selected=!0,c.dispatchEventWith(a.events.Event.SELECT,!1,d.data)):d.selected=!1})}else this.forEach(function(a,b){b.selected=!1}),this.mSelectedItem=null,this.mSelectedIndex=-1},d.prototype._validateData=function(){this.mDataProvider&&this.defaultSelectedItemIndex>=0&&(this.defaultSelectedItemIndex>=this.mDataProvider.length&&(this.defaultSelectedItemIndex=this.mDataProvider.length-1),this.selectedIndex=this.defaultSelectedItemIndex)},d.prototype._validateLayout=function(b,d,e){if(void 0===b&&(b=0),void 0===d&&(d=0),void 0===e&&(e=-1),this.layout){if(1==this.mLayoutLock)return;this.mLayoutLock=!0;var f=this;-1==e&&(e=this.numChildren-1);for(var g=d;e>=g;g++){var h=this.getChildAt(g),i=this.layout.getItem(h.id),j=h.visible;h.extraWidth=0,h.status<2&&(h.width=i.width,h.height=i.height,h.visible=!0,h.validateSize(),h.visible=j,i.width=h.width,i.height=h.height)}this.layout.layout();for(var g=d;e>=g;g++){var h=this.getChildAt(g),i=f.layout.getItem(h.id);if(i.dirty){if(isFinite(i.extraWidth)&&(h.extraWidth=i.width+i.extraWidth,h.validateSize()),b>0){var k={x:i.x,y:i.y};i.visible!=h.visible&&(i.visible?(h.visible=!0,h.data=f.dataProvider.getItemAt(g),h.alpha=1):h.visible=!1),1==h.visible?c.Transition.to(h,b,k):(h.x=i.x,h.y=i.y,h.validatePosition())}else c.Transition.kill(h),h.x=i.x,h.y=i.y,h.validatePosition(),2==h.status&&(h.alpha=1,h.visible=!0);i.dirty=!1}}this.setSize(this.layout.width,this.layout.height,!0),this.dispatchEventWith(a.events.Event.RESIZE),this.mLayoutLock=!1}},d.prototype.validate=function(a,c,d){void 0===a&&(a=!1),void 0===c&&(c=!1),void 0===d&&(d=!1),this.layout?(this.layout.width=this.width,this.layout.height=this.height,this.layout.resetLayout(),this._validateLayout(this.animationDuration),b.prototype.validateSize.call(this)):b.prototype.validate.call(this,a,c,d)},d.prototype._handleItemTriggeredEvent=function(b){this.mSelectedItem=b.target.data,this.mSelectedIndex=b.target.data.index,this.dispatchEventWith(a.events.Event.SELECT,!1,this.mSelectedItem)},d.prototype._handleItemRendererUpdate=function(b){if(this.layout){var c=b.target;c&&(this.mWaitingUpdateItem--,c.removeEventListener(a.events.Event.UPDATE,this._handleItemRendererUpdate),this.layout.updateItem(c.id,{width:c.width,height:c.height}),this.layout.resetLayout(),this._validateLayout(0),0==this.mWaitingUpdateItem&&this.dispatchEventWith(a.events.Event.READY))}},d.prototype.filter=function(a){if(void 0===a&&(a=null),a){var b=this;this.forEach(function(c,d){if(d.data){var e=b.layout.getItem(d.id),f=!1;for(var g in a)d.data.data[g]==a[g]&&(f=!0);e.visible=f,e.dirty=!0}})}else this.layout.setAllVisible(!0);this._validateLayout(this.animationDuration)},d.prototype.validateItemRenderer=function(){this.forEach(function(a,b){b.status=1,b.data=b.data})},d.prototype.setItemProperty=function(a,b,c){void 0===c&&(c=!1),this.forEach(function(c,d){d[a]=b})},d.prototype.refresh=function(){this.validate()},d.prototype.unload=function(){this.removeAllChildren(),this.mDataProvider=null,this.mWaitingUpdateItem=0,this.mSelectedIndex=-1,this.mSelectedItem=null,this.setSize(this.width,10,!0)},d}(a.display.ViewContainer);b.List=g;var h=function(b){function d(){b.apply(this,arguments),this.buffer=20}return __extends(d,b),d.prototype.checkVisibility=function(){var a=this,b=this.parent.node.scrollTop,d=b+this.parent.size.innerHeight;this.forEach(function(e,f){var g=a.layout.getItem(f.id);1!=f.status&&(0==f.visible?g.y<=d&&g.y+g.height>=b&&(1==g.visible?2==f.status?f.visible=!0:(f.visible=!0,f.data=a.dataProvider.getItemAt(e)):f.visible=!1):(g.y>d||g.y+g.height<=b||0==g.visible)&&(f.status<2&&c.Transition.kill(f),f.visible=!1))})},d.prototype._validateData=function(){if(this.dataProvider){var b=this,d=[];if(this.layout){this.layout.resetLayout();var e=this.numChildren,f=e+this.buffer;if(f=(0==f||f>this.dataProvider.length?this.dataProvider.length:f)-1,this.children.length>=f)return;for(var g=e;f>=g;g++){var h,i=this.dataProvider.getItemAt(g),j={};h=i.data.width&&i.data.height?this.layout.getItemSize(i.data.width,i.data.height):this.layout.getItemSize(30,30),j.width=h.w,j.height=h.h;var k=b._createItemRenderer();k.transform=new c.Transform,k.transform.useTransform=!0,k.floating=!0,b.layout.addItem(k.id,j),d.push(k)}this.addChildren(d);for(var g=e;f>=g;g++){var k=this.children[g],l=this.layout.getItem(k.id);k.addEventListener(a.events.Event.UPDATE,this._handleItemRendererUpdate,this),this.waitingUpdateItem++,l.y>this.height&&(k.visible=!1),k.data=this.dataProvider.getItemAt(g)}this._validateLayout(0,e,f)}else this.dataProvider.forEach(function(a,c){var e=b._createItemRenderer();d.push(e),e.data=c}),this.addChildren(d);d=null}},d.prototype.refresh=function(){this._validateData()},d}(g);b.ScrollList=h;var i=function(b){function d(){b.apply(this,arguments),this.defaultPosition=0,this.mPosition=0,this.mVisibleItemCount=1}return __extends(d,b),Object.defineProperty(d.prototype,"position",{get:function(){return this.mPosition},set:function(a){this.mPosition!=a&&(this.mPosition=a,this.goto(a))},enumerable:!0,configurable:!0}),d.prototype._validateData=function(){if(b.prototype._validateData.call(this),this.dataProvider){this.defaultPosition<0?this.defaultPosition=0:this.defaultPosition>=this.dataProvider.length&&(this.defaultPosition=this.dataProvider.length-1),this.mPosition=this.defaultPosition;for(var a=[],d=0;d<this.mVisibleItemCount;d++){var e=this._createItemRenderer(),f={width:50,height:50};this.layout&&(e.transform=new c.Transform,e.transform.useTransform=!0,e.alpha=0,this.layout.addItem(e.id,f)),a.push(e)}this.addChildren(a),this._updatePosition()}},d.prototype._updatePosition=function(){var b=this,c=this.mPosition;this.forEach(function(d,e){var f=b.dataProvider.getItemAt(c);f?(e.addEventListener(a.events.Event.UPDATE,b._handleItemRendererUpdate,this),this.mWaitingUpdateItem++,e.data=f,e.visible=!0):e.visible=!1,c++}),this.layout&&(this.layout.resetLayout(),this._validateLayout(this.animationDuration))},d.prototype.next=function(){var a=this.mPosition+this.mVisibleItemCount;this.goto(a)},d.prototype.prev=function(){var a=this.mPosition-this.mVisibleItemCount;this.goto(a)},d.prototype.goto=function(a){this.dataProvider&&a>=0&&a<this.dataProvider.length&&(this.mPosition=a,this._updatePosition())},d}(g);b.NavigatorList=i}(a.display||(a.display={}));a.display}(dc||(dc={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},dc;!function(a){!function(b){var c=a.display,d=a.text,e=a.core,f=function(b){function f(){b.apply(this,arguments),this.imageDataName="source",this.titleDataName="title",this.descDataName="description",this.tagsDataName="category"}return __extends(f,b),f.prototype._createChildren=function(){b.prototype._createChildren.call(this),this.mImage=new c.ImageView,this.mContent=new c.ViewContainer,this.mTitle=new d.TextField,this.mDescription=new d.TextField,this.addChild(this.mImage),this.mContent.addChild(this.mTitle),this.mContent.addChild(this.mDescription),this.addChild(this.mContent),this.mContent.addClass("content"),this.mTitle.addClass("title"),this.mDescription.addClass("description")},f.prototype._present=function(){},f.prototype._handleImageTrigger=function(){this.close()},f.prototype._handleImageUpdate=function(){this.mImage.removeEventListener(a.events.Event.UPDATE,this._handleImageUpdate);var c=this.mImage.orgWidth/this.mImage.orgHeight,d=0,f=0;this.mImage.orgWidth>this.mImage.orgHeight?(d=this.mImage.orgWidth>this.modalWidth?this.modalWidth:this.mImage.orgWidth,f=d/c,this.modalWidth=d,this.modalHeight=0):(f=this.mImage.orgHeight>this.modalHeight?this.modalHeight:this.mImage.orgHeight,d=f*c,d>this.modalWidth&&(d=this.modalWidth,f=d/c),this.modalWidth=d,this.modalHeight=0),this.mImage.setSize(d,f),this.mImage.validate(),this.modalContainer.alpha=0,b.prototype._present.call(this);var g=this.modalContainer.y;e.Transition.fromTo(this.modalContainer,500,{y:this.height+10},{y:g,alpha:1,ease:e.Ease.easeOutBack})},f.prototype._validateData=function(b){b[this.titleDataName]?(this.mTitle.visible=!0,this.mTitle.text=b[this.titleDataName]):this.mTitle.visible=!1,b[this.descDataName]?(this.mDescription.visible=!0,this.mDescription.text=b[this.descDataName]):this.mDescription.visible=!1,this.mContent.visible=this.mTitle.visible||this.mDescription.visible,b[this.imageDataName]&&(this.mImage.addEventListener(a.events.Event.UPDATE,this._handleImageUpdate,this),this.mImage.url=b[this.imageDataName])},f}(c.Modal);b.ImageDetailModal=f}(a.components||(a.components={}));a.components}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.display,d=(a.text,a.core),e=function(b){function e(){b.apply(this,arguments),this.animationDuration=200}return __extends(e,b),e.prototype._createChildren=function(){b.prototype._createChildren.call(this),this.mList=new c.NavigatorList,this.mList.floating=!0,this.mList.itemRenderer=a.components.renderers.ImageDetailRenderer,this.mPrevButton=new c.Button(""),this.mNextButton=new c.Button(""),this.mCloseButton=new c.Button(""),this.addChild(this.mList),this.addChild(this.mPrevButton),this.addChild(this.mNextButton),this.addChild(this.mCloseButton),this.modalContainer.transform=new d.Transform,this.modalContainer.transform.useTransform=!0,this.modalContainer.clipping=!0,this.modalContainer.floating=!0,this.mCloseButton.floating=this.mPrevButton.floating=this.mNextButton.floating=!0,this.mPrevButton.addClass("prev"),this.mNextButton.addClass("next"),this.mCloseButton.addClass("close"),this.modalContainer.addClass("image_detail"),this.mPrevButton.addEventListener(a.events.Event.TRIGGERED,this.handleButtonTriggered,this),this.mNextButton.addEventListener(a.events.Event.TRIGGERED,this.handleButtonTriggered,this),this.mCloseButton.addEventListener(a.events.Event.TRIGGERED,this.handleButtonTriggered,this),this.mList.addEventListener(a.events.Event.UPDATE,this.handleUpdate,this)},e.prototype._prepare=function(){this.mList.width=this.size.innerWidth,this.mList.height=this.size.innerHeight,b.prototype._prepare.call(this)},e.prototype._present=function(){},e.prototype._validateData=function(){},e.prototype._open=function(){function a(){b.mList.position<=0?b.mPrevButton.visible=!1:b.mList.position>=b.mList.dataProvider.length-1?b.mNextButton.visible=!1:(b.mPrevButton.visible=!0,b.mNextButton.visible=!0)}this.removeClass("dc-progress");var b=this,c=(this.size.innerWidth-this.modalContainer.width)/2,e=(this.size.innerHeight-this.modalContainer.height)/2,f=this.modalContainer.x>0?-this.size.innerWidth:this.size.innerWidth;d.Transition.fromTo(this.modalContainer,this.animationDuration,{x:f,y:e},{x:c,y:e,oncomplete:a}),this.opened=!0},e.prototype._next=function(a){void 0===a&&(a=!0);var b=this,c=a?-this.width:this.width;this.addClass("dc-progress"),this.mList.width=this.size.innerWidth,this.mList.height=this.size.innerHeight,(a&&this.mList.position<this.mList.dataProvider.length-1||!a&&this.mList.position>0)&&d.Transition.to(this.modalContainer,this.animationDuration,{x:c,oncomplete:function(){a?b.mList.next():b.mList.prev()}})},e.prototype.handleButtonTriggered=function(a){a.target==this.mPrevButton?this._next(!1):a.target==this.mNextButton?this._next():a.target==this.mCloseButton&&this.close()},e.prototype.handleUpdate=function(){this.modalContainer.visible=!0,this.mList.validateSize(!0,!0),this.modalWidth=this.mList.width,this.modalHeight=this.mList.height,b.prototype._present.call(this)},e.prototype.goto=function(a,b){void 0===b&&(b=null),0==this.opened&&this.show(b),this.mList.width=this.size.innerWidth,this.mList.height=this.size.innerHeight,this.addClass("dc-progress"),void 0==this.mList.dataProvider?(this.mList.defaultPosition=a,this.mList.dataProvider=this.data):this.mList.goto(a)},e}(c.Modal);b.ImageNavigatorModal=e}(a.components||(a.components={}));a.components}(dc||(dc={}));var dc;!function(a){!function(b){!function(b){var c=a.display,d=a.text,e=function(b){function e(){b.apply(this,arguments),this.status=0,this.extraWidth=0,this.mSelected=!1}return __extends(e,b),Object.defineProperty(e.prototype,"data",{get:function(){return this.mData},set:function(a){this.mData=a,this._validateData(a.data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.mSelected},set:function(a){this.mSelected!=a&&(this.mSelected=a,a?this.addClass("selected"):this.removeClass("selected"))},enumerable:!0,configurable:!0}),e.prototype._createChildren=function(){b.prototype._createChildren.call(this),this.mImageContainer=new c.ViewContainer,this.mImage=new c.ImageView,this.mLabel=new d.TextField,this.mDesc=new d.TextField,this.addClass("dc-renderer dc-thumbnail"),this.mLabel.addClass("title"),this.mDesc.addClass("description"),this.mImageContainer.clipping=!0,this.mImage.addEventListener(a.events.Event.TRIGGERED,this._handleImageTriggered,this),this.mImage.interactive=!0,this.mImage.visible=!1,this.mImageContainer.addChild(this.mImage),this.addChild(this.mImageContainer),this.addChild(this.mLabel),this.addChild(this.mDesc)},e.prototype._validateData=function(b){b&&(this.visible&&b[this.properties.thumbnailDataName]&&this.mImage.url!=b[this.properties.thumbnailDataName]&&(this.mImage.addEventListener(a.events.Event.UPDATE,this._handleImageUpdate,this),this.addClass("dc-progress"),this.status=1,this.mImage.url=b[this.properties.thumbnailDataName]),this.properties.titleDataName&&b[this.properties.titleDataName]?(this.properties.horizontal?this.mLabel.addClass("horizontal"):this.mLabel.removeClass("horizontal"),this.mLabel.visible=!0,this.mLabel.text=b[this.properties.titleDataName]):this.mLabel.visible=!1,this.properties.descriptionDataName&&b[this.properties.descriptionDataName]?(this.mDesc.visible=!0,this.mDesc.text=b[this.properties.descriptionDataName],this.mLabel.removeClass("last")):(this.mLabel.addClass("last"),this.mDesc.visible=!1))
},e.prototype.validateSize=function(a,d){if(void 0===a&&(a=!1),void 0===d&&(d=!1),this.visible=!0,this.mImage.orgWidth>0&&this.mImage.orgHeight>0){if(this.properties.horizontal)if(this.height=this.properties.explicitHeight,this.size.innerHeight=this.size.height-this.measurements.paddingHeight-this.measurements.borderHeight,this.size.outerHeight=this.size.height+this.measurements.marginHeight,this.properties.squareImage){var e=c.ScaleMode.getSize(this.mImage.orgWidth,this.mImage.orgHeight,this.height,this.height,c.ScaleMode.AUTO_FILL);this.mImage.setSize(e.width,e.height,!0),this.mImage.node.style.marginLeft=e.x+"px",this.mImage.node.style.marginTop=e.y+"px",this.mImage.validatePosition(),this.mImageContainer.setSize(this.height,this.height,!0),b.prototype.validateSize.call(this,!0,d)}else if(this.extraWidth>0&&this.width>5){var e=c.ScaleMode.getSize(this.mImage.orgWidth,this.mImage.orgHeight,this.extraWidth,this.height,c.ScaleMode.AUTO_FILL);this.mImage.setSize(e.width,e.height,!0),this.mImage.node.style.marginLeft=e.x+"px",this.mImage.node.style.marginTop=e.y+"px",this.mImage.validatePosition(),this.mImageContainer.setSize(this.extraWidth,this.height,!0),this.width=this.extraWidth,b.prototype.validateSize.call(this,a,d)}else{this.mImageContainer.node.style.width=this.mImageContainer.node.style.height=this.mImage.node.style.marginLeft=this.mImage.node.style.marginTop="";var f=this.size.innerHeight,g=f*this.mImage.orgWidth/this.mImage.orgHeight;this.mImage.setSize(g,f,!0),b.prototype.validateSize.call(this,!0,d)}else{if(this.width=this.properties.explicitWidth,this.size.innerWidth=this.size.width-this.measurements.paddingWidth-this.measurements.borderWidth,this.size.outerWidth=this.size.width+this.measurements.marginWidth,this.properties.squareImage){var e=c.ScaleMode.getSize(this.mImage.orgWidth,this.mImage.orgHeight,this.width,this.width,c.ScaleMode.AUTO_FILL);this.mImage.setSize(e.width,e.height,!0),this.mImage.node.style.marginLeft=e.x+"px",this.mImage.node.style.marginTop=e.y+"px",this.mImage.validatePosition(),this.mImageContainer.setSize(this.width,this.width,!0)}else{this.mImageContainer.node.style.width=this.mImageContainer.node.style.height=this.mImage.node.style.marginLeft=this.mImage.node.style.marginTop="";var g=this.size.innerWidth,f=g/this.mImage.orgWidth*this.mImage.orgHeight;this.mImage.setSize(g,f,!0)}b.prototype.validateSize.call(this,a,!0)}this.status=2}else b.prototype.validateSize.call(this,a,d)},e.prototype._handleImageTriggered=function(b){b.stopsPropagation=!0,this.dispatchEventWith(a.events.Event.TRIGGERED,!1,this.data)},e.prototype._handlImageOver=function(){a.core.Transition.fromTo(this.mLabel,500,{y:this.mImage.height},{y:this.mImage.height-this.height-this.mLabel.height})},e.prototype._handlImageOut=function(){},e.prototype._handleImageUpdate=function(){this.mImage.removeEventListener(a.events.Event.UPDATE,this._handleImageUpdate),this.removeClass("dc-progress"),this.mImage.orgWidth>0&&this.mImage.orgHeight>0&&(this.mImage.alpha=0,this.mImage.visible=!0,this.validateSize(),this.mImage.fadeIn(),this.dispatchEventWith(a.events.Event.UPDATE))},e}(c.ViewContainer);b.ThumbnailRenderer=e;var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype._createChildren=function(){a.prototype._createChildren.call(this),this.mIndex=new d.TextField,this.mTags=new d.TextField,this.mIndex.addClass("index"),this.mTags.addClass("tags"),this.mIndex.floating=!0,this.mTags.floating=!0,this.addChild(this.mIndex),this.addChild(this.mTags)},b.prototype._validateData=function(b){a.prototype._validateData.call(this,b),b&&(this.mIndex.text=""+b.index,b[this.properties.tagsDataName]?(this.mTags.visible=!0,this.mTags.text=b[this.properties.tagsDataName]):this.mTags.visible=!1)},b}(e);b.ThumbnailDebugRenderer=f}(b.renderers||(b.renderers={}));b.renderers}(a.components||(a.components={}));a.components}(dc||(dc={}));var dc;!function(a){!function(b){!function(b){var c=a.display,d=a.text,e=function(b){function e(){b.apply(this,arguments),this.imageDataName="src",this.titleDataName="title",this.descriptionDataName="description",this.tagsDataName="category"}return __extends(e,b),e.prototype._createChildren=function(){b.prototype._createChildren.call(this),this.mImage=new c.ImageView,this.addChild(this.mImage),this.mContent=new c.ViewContainer,this.mTitle=new d.TextField,this.mDescription=new d.TextField,this.mContent.addChild(this.mTitle),this.mContent.addChild(this.mDescription),this.addChild(this.mContent),this.clipping=!0,this.mContent.addClass("content"),this.mTitle.addClass("title"),this.mDescription.addClass("description")},e.prototype._validateData=function(b){b[this.titleDataName]?(this.mTitle.visible=!0,this.mTitle.text=b[this.titleDataName]):this.mTitle.visible=!1,b[this.descriptionDataName]?(this.mDescription.visible=!0,this.mDescription.text=b[this.descriptionDataName]):this.mDescription.visible=!1,this.mContent.visible=this.mTitle.visible||this.mDescription.visible,b[this.imageDataName]&&(this.mImage.addEventListener(a.events.Event.UPDATE,this._handleImageUpdate,this),this.mImage.url=b[this.imageDataName])},e.prototype._handleImageUpdate=function(){this.mImage.removeEventListener(a.events.Event.UPDATE,this._handleImageUpdate);var b=this.mImage.orgWidth/this.mImage.orgHeight,c=0,d=0;this.mImage.orgWidth>this.mImage.orgHeight?(c=this.mImage.orgWidth>this.parent.size.width?this.parent.size.width:this.mImage.orgWidth,d=c/b,d>this.parent.size.height-100&&(d=this.parent.size.height-100,c=d*b)):(d=this.mImage.orgHeight>this.parent.size.height-100?this.parent.size.height-100:this.mImage.orgHeight,c=d*b,c>this.parent.size.width&&(c=this.parent.size.width,d=c/b)),this.mImage.setSize(c,d),this.mImage.validate(),this.setSize(c,d),this.validateSize(!1,!0),this.x=(this.parent.size.width-c)/2,this.dispatchEventWith(a.events.Event.UPDATE,!0)},e}(c.DefaultViewContainerRenderer);b.ImageDetailRenderer=e}(b.renderers||(b.renderers={}));b.renderers}(a.components||(a.components={}));a.components}(dc||(dc={}));var dc;!function(a){!function(b){function c(c,d,e,f,g){function h(a,b){for(var c in a)b[c.toLowerCase()]?i.addEventListener(b[c.toLowerCase()],a[c]):"src"==c?i.load(a[c]):i[c]=a[c]}var i,j;if(j="string"==typeof d?0==d.indexOf("#")?a.id(d.replace(/^#/,"")):a.tag(d)[0]:d,!j)return null;if(void 0==b._galleryInstance&&(b._galleryInstance={}),void 0!=b._galleryInstance[j.id])return i=b._galleryInstance[j.id],h(e,g),i;b._galleryInstance[j.id]=i=new c(j);for(var k=0;k<j.attributes.length;k++){var l=j.attributes[k],m=""+l.name;if(0==m.indexOf("data-setting")){var n=parseFloat(l.value),o=f[m];0==o.t?i[o.p]=l.value:1==o.t?i[o.p]=n:2==o.t&&(i[o.p]="true"===l.value)}}return e&&h(e,g),i}var d=a.events,e=a.data,f=a.parsers;b._galleryInstance,b.init=c;var g=function(b){function c(c,d){if(void 0===d&&(d=null),b.call(this),this.rootPath="",this.mTimeintervalScroll=0,this.mTimeintervalScrollCount=0,this.container=c,void 0!=this.container){this.container!=document.body&&a.addClass(this.container,"dc-gallery-container"),this.scrollTarget=this.container==document.body?window:this.container;for(var e in d)this.hasOwnProperty(e)&&(this[e]=d[e]);this._init()}}return __extends(c,b),Object.defineProperty(c.prototype,"src",{get:function(){return this.mSrc},set:function(a){this.mSrc!=a&&this.load(a)},enumerable:!0,configurable:!0}),c.prototype._init=function(){this.mData=[],this.dataProvider=new e.Collection(this.mData),this._createChildren()},c.prototype._createChildren=function(){},c.prototype._addEvents=function(){var b,c=this;this.mResizeEventHandler=function(){b&&clearTimeout(b),b=setTimeout(function(){c._resize(c.container.clientWidth,c.container.clientHeight)},300)},a.bind(window,"resize",this.mResizeEventHandler);var d=!1;this.mScrollEventHandler=function(){c._scroll(),a.os.ios&&c.mTimeintervalScroll&&clearInterval(c.mTimeintervalScroll)},a.os.ios?(a.bind(this.scrollTarget,"touchmove",function(){c.mTimeintervalScroll&&clearInterval(c.mTimeintervalScroll),c._scroll(),d=!0}),a.bind(this.scrollTarget,"touchend",function(){d&&(c._scroll(),c.mTimeintervalScrollCount=0,c.mTimeintervalScroll=setInterval(function(){c._scroll(),c.mTimeintervalScrollCount>100?(c.mTimeintervalScroll&&clearInterval(c.mTimeintervalScroll),c.mTimeintervalScrollCount=0):c.mTimeintervalScrollCount++},200)),d=!1}),a.bind(this.scrollTarget,"scroll",this.mScrollEventHandler)):a.bind(this.scrollTarget,"scroll",this.mScrollEventHandler)},c.prototype._removeEvents=function(){a.unbind(this.container,"resize",this.mResizeEventHandler),a.unbind(this.container,"scroll",this.mScrollEventHandler)},c.prototype._start=function(){},c.prototype._resize=function(){this.dispatchEventWith(d.Event.RESIZE)},c.prototype._scroll=function(){},c.prototype._procressData=function(){},c.prototype._load=function(a){a&&this.container&&(this._addEvents(),this.dataProvider=new e.Collection(a),this._start(this.dataProvider))},c.prototype.load=function(b){if(b)if("string"==typeof b){this.mSrc=b;var c=new a.io.DataLoader(this.mSrc);c.addEventListener(d.Event.COMPLETE,this._handleLoaderEvent,this),c.load(!0)}else this._load(b)},c.prototype.unload=function(){this._removeEvents()},c.prototype.goto=function(){},c.prototype._handleLoaderEvent=function(a){var b,c=a.target,e=this.mSrc.split("/");e.pop();var g=e.join("/")+"/";if("json"===c.type)b=this.rootPath&&""!=this.rootPath?f.parseJSONData(c.content,this.rootPath):f.parseJSONData(c.content,g);else if("xml"===c.type){var h,i=c.content;h=f.LRXMLParser.isXMLValid(i)?new f.LRXMLParser:f.PSXMLParser.isXMLValid(i)?new f.PSXMLParser:new f.DCXMLParser,h.rootPath=this.rootPath&&""!=this.rootPath?this.rootPath:g,b=h.parse(i)}this._load(b),this.dispatchEventWith(d.Event.COMPLETE,!1,b)},c}(d.EventDispatcher);b.GalleryController=g}(a.gallery||(a.gallery={}));a.gallery}(dc||(dc={}));var dc;!function(a){!function(b){var c=a.display,d=a.layout,e=(a.core,a.components),f=a.components.renderers,g=function(){function a(){}return a.VERTICAL="vertical",a.HORIZONTAL="horizontal",a.HORIZONTAL_FIT="horizontal_fit",a}();b.ThumbnailAlignment=g;var h=function(b){function h(){b.apply(this,arguments),this.mAnimationDuration=300,this.mGap=10,this.mColumnCount=-1,this.mThumbnailSize=150,this.mHorizontal=!1,this.mThumbnailAlignment=g.VERTICAL,this.mThumbnailAction="modal",this.mRefreshTimeout=0,this.mResizeTimeout=0}return __extends(h,b),Object.defineProperty(h.prototype,"animationDuration",{get:function(){return this.mAnimationDuration},set:function(a){this.mList&&(this.mAnimationDuration=a,this.mList.animationDuration=a,this.mModal.animationDuration=a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"buffer",{get:function(){return this.mList.buffer},set:function(a){this.mList.buffer!=a&&(this.mList.buffer=a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"gap",{get:function(){return this.mGap},set:function(a){this.mGap!=a&&(this.mGap=a,this._validateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"columnCount",{get:function(){return this.mColumnCount},set:function(a){this.mColumnCount!=a&&(this.mColumnCount=a,this._validateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"thumbnailSize",{get:function(){return this.mThumbnailSize},set:function(a){this.mThumbnailSize!=+a&&(this.mThumbnailSize=+a,this._validateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"thumbnailAlignment",{get:function(){return this.mThumbnailAlignment},set:function(a){this.mThumbnailAlignment!=a&&(this.mThumbnailAlignment=a,this._setAlignment())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"thumbnailTitleEnabled",{get:function(){return null!=this.mDefaultItemProperties.titleDataName},set:function(a){a?this._validateItemRendererProperties("titleDataName","title"):this._validateItemRendererProperties("titleDataName",null)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"thumbnailDescriptionEnabled",{get:function(){return null!=this.mDefaultItemProperties.descriptionDataName},set:function(a){a?this._validateItemRendererProperties("descriptionDataName","description"):this._validateItemRendererProperties("descriptionDataName",null)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"thumbnailSquareImage",{get:function(){return this.mDefaultItemProperties.squareImage},set:function(a){this.mDefaultItemProperties.squareImage!=a&&this._validateItemRendererProperties("squareImage",a)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"thumbnailAction",{get:function(){return this.mThumbnailAction},set:function(a){this.mThumbnailAction=a},enumerable:!0,configurable:!0}),h.prototype._createChildren=function(){b.prototype._createChildren.call(this),this.mContainerStyles=c.MeasurementsHelper.getStyle(this.container),this.mContainerMeasurement=c.MeasurementsHelper.getMeasurements(this.container,this.mContainerStyles),this.mContainer=new c.ViewContainer,this.mContainer.addClass("dc-scroll-container fill"),this.mContainer.attachTo(this.container),this.mList=new c.ScrollList,this.mList.addClass("dc-thumbnail-list"),this.mList.itemRenderer=f.ThumbnailRenderer,this.mList.defaultItemProperties=this.mDefaultItemProperties={thumbnailDataName:"thumbnail",titleDataName:null,descriptionDataName:null,tagsDataName:null,squareImage:!1,fitWidth:!1,horizontal:!1,explicitWidth:150,explicitHeight:150},this.mList.addEventListener(a.events.Event.SELECT,this.handleListEvent,this),this.mList.addEventListener(a.events.Event.READY,this.handleReadyEvent,this),this.mContainer.addChild(this.mList),this.scrollTarget=this.mContainer.node,this.mLayout=new d.ColumnLayout(this.mList.width,this.mList.height),this.mList.layout=this.mLayout,this.mModal=new e.ImageNavigatorModal,this.mContainer.floating=!0,this.mContainer.measure()},h.prototype._start=function(b){var c=this;this._validateProperties(),this.mList.addEventListener(a.events.Event.RESIZE,this.handleListResize,this),this.mList.dataProvider=b,setTimeout(function(){c.mContainer.removeClass("dc-progress"),c.mModal.data=b})},h.prototype._resize=function(){this.mContainer.validateSize(!0,!0),this.mList.validateSize(!0,!0),this.mLayout.width=this.mList.size.innerWidth,this.mLayout.height=this.mList.size.innerHeight;var a=this;this.mResizeTimeout&&clearTimeout(this.mResizeTimeout),this.mResizeTimeout=setTimeout(function(){a._validateProperties()},100)},h.prototype._scroll=function(){if(this.mList.height<=this.mContainer.node.scrollTop+this.container.clientHeight){var a=this;this.mRefreshTimeout&&clearTimeout(this.mRefreshTimeout),this.mRefreshTimeout=setTimeout(function(){a.mList.refresh()},500)}else this.mList.checkVisibility()},h.prototype._setAlignment=function(){this.mThumbnailAlignment==g.HORIZONTAL?(this.mHorizontal=!0,this.mDefaultItemProperties.fitWidth=!1,this.mLayout.fitWidth=!1):this.mThumbnailAlignment==g.HORIZONTAL_FIT?(this.mHorizontal=!0,this.mDefaultItemProperties.fitWidth=!0,this.mLayout.fitWidth=!0):(this.mHorizontal=!1,this.mDefaultItemProperties.fitWidth=!1,this.mLayout.fitWidth=!1),this.mLayout.horizontal=this.mHorizontal,this._validateItemRendererProperties("horizontal",this.mHorizontal),this._resize(0,0)},h.prototype._validateProperties=function(){if(this.mLayout.columnSize=this.mThumbnailSize,this.mLayout.columnCount=this.mColumnCount,this.mLayout.gap=this.mGap,this.mLayout.horizontal=this.mHorizontal,this.mLayout.resetLayout(),this.mDefaultItemProperties.explicitWidth=this.mLayout.columnSize,this.mDefaultItemProperties.explicitHeight=this.mLayout.columnSize,this.mDefaultItemProperties.horizontal=this.mHorizontal,this.mList&&this.mList.dataProvider)if(this.mList.validateItemRenderer(),this.mList.layout.updateAllItems("dirty",!0),this.mList.validate(),this.buffer>0&&this.mList.numChildren!=this.dataProvider.length){var a=this.mList.getChildAt(this.mList.numChildren-1);a&&a.y<this.mContainer.size.height&&this.mList.refresh()}else{this.mContainer.node.scrollHeight+this.mContainer.measurements.paddingHeight+this.mContainer.measurements.borderHeight}},h.prototype._validateItemRendererProperties=function(a,b){this.mDefaultItemProperties[a]=b,this.mList&&this.mList.dataProvider&&(this.mList.validateItemRenderer(),this.mList.layout.updateAllItems("dirty",!0),this.mList.validate())},h.prototype.goto=function(a){this.mModal.goto(a,"inline_modal"==this.mThumbnailAction?this.container:null)},h.prototype.load=function(a){a&&this.mContainer.addClass("dc-progress"),b.prototype.load.call(this,a)},h.prototype.unload=function(){b.prototype.unload.call(this),this.mList&&this.mList.unload(),this.mModal&&this.mModal.close()},h.prototype.handleListResize=function(){this.mList.removeEventListener(a.events.Event.RESIZE,this.handleListResize),this._resize(0,0)},h.prototype.handleReadyEvent=function(){if(this._resize(0,0),this.buffer>0&&this.mList.numChildren!=this.dataProvider.length){var b=this.mList.getChildAt(this.mList.numChildren-1);b&&b.y<this.mContainer.size.height?this.mList.refresh():this.dispatchEventWith(a.events.Event.READY)}else this.dispatchEventWith(a.events.Event.READY)},h.prototype.handleListEvent=function(b){this.dispatchEventWith(a.events.Event.SELECT,!1,b.data.data),"modal"==this.mThumbnailAction||"inline_modal"==this.mThumbnailAction?this.goto(b.data.index):"link"==this.mThumbnailAction&&b.data.data.link&&(console.log("target",b.data.data.linktarget),b.data.data.linktarget?window.open(b.data.data.link,b.data.data.linktarget):window.location=b.data.data.link)},h}(a.gallery.GalleryController);b.Galerie=h}(a.gallery||(a.gallery={}));a.gallery}(dc||(dc={}));var dc;!function(a){function b(b,e){var f={oncomplete:d.Event.COMPLETE,onselect:d.Event.SELECT,onresize:d.Event.RESIZE,onready:d.Event.READY},g={"data-setting-src":{p:"src",t:0},"data-setting-animationduration":{p:"animationDuration",t:1},"data-setting-buffer":{p:"buffer",t:1},"data-setting-gap":{p:"gap",t:1},"data-setting-columncount":{p:"columnCount",t:1},"data-setting-thumbnailsize":{p:"thumbnailSize",t:1},"data-setting-thumbnailalignment":{p:"thumbnailAlignment",t:0},"data-setting-thumbnailtitleenabled":{p:"thumbnailTitleEnabled",t:2},"data-setting-thumbnaildescriptionenabled":{p:"thumbnailDescriptionEnabled",t:2},"data-setting-thumbnailsuareimage":{p:"thumbnailSquareImage",t:2},"data-setting-thumbnailaction":{p:"thumbnailAction",t:0}},h=c.init(c.Galerie,b,e,g,f);if(h)if(h.src);else{if(h.container.childNodes)var i=a.parsers.parseDomData(h.container.childNodes);i&&h.load(i)}return h}var c=a.gallery,d=a.events;a.instances,a.galerie=b,a.asyncInit(function(){for(var b=a.name("dc-galerie"),c=0;c<b.length;c++)a.galerie(b[c])}),window.jQuery&&(jQuery.fn.galerie=function(b){return void 0===b&&(b=null),a.ready||a.init(),this?a.galerie(this[0],b):this})}(dc||(dc={}));